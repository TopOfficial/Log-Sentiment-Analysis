# Backend for Log Sentiment Analysis

This is the backend service for the **Log Sentiment Analysis** project. It provides RESTful APIs for managing machines, logs, processed logs, knowledge base entries, conversations, and messages. Built using **FastAPI**, this service connects to a MySQL database and supports features like creating, updating, and retrieving data.

---

## **Features**

1. **Machine Management**:

   - Manage machine details.

2. **Log Management**:

   - Store and retrieve logs generated by machines.

3. **Processed Log Analysis**:

   - Manage logs with sentiment analysis and resolution status.

4. **Knowledge Base**:

   - Manage knowledge base entries for resolving known issues.

5. **Conversations and Messages**:

   - Store user conversations and messages linked to logs.

6. **Database**:
   - MySQL database integration with relationships between tables.

---

## **Set Up a Virtual Environment**

```
python -m venv venv
source venv/bin/activate # On Windows: venv\Scripts\activate

```

## **Install Dependencies**

```
pip install -r requirements.txt
```

---

## **Initialize Database**

In CMD

```
cd backend
mysql -u root -p llm-log < llm-log.sql
```

when asked for password, type in your root password

---

## **Environment Configuration (.env)**

Create a .env file in the root directory of the project. This file is used to configure database credentials and other sensitive settings.

```
DATABASE_URL=mysql+pymysql://rfid_system_adm:X67QmT9YEjr:eCE@devux-db.sin.infineon.com:3306/rfid_system
APP_NAME=Machine Logs App
ENVIRONMENT=development
DEBUG_MODE=True
LOG_LEVEL=debug
```

---

## **Running the Application**

Start the FastAPI Server

```
uvicorn app.main:app --reload
```

---

## **Usage**

## Available Endpoints

| Endpoint                             | Method | Description                                             |
| ------------------------------------ | ------ | ------------------------------------------------------- |
| /api/errors/                         | GET    | Fetch all error logs with optional filters.             |
| /api/errors/{process_id}             | PATCH  | Update the resolved status of an error log.             |
| /api/chat/solution                   | POST   | Retrieve a solution for a log (or generate one).        |
| /api/chat/conversation               | POST   | Create a new conversation (with optional messages).     |
| /api/chat/conversation/{id}/messages | PUT    | Add messages to an existing conversation.               |
| /api/knowledgebase/                  | GET    | Fetch all knowledge base entries with optional filters. |
| /api/knowledgebase/                  | POST   | Add a new knowledge base entry.                         |
| /api/knowledgebase/{knowledge_id}    | PATCH  | Update an existing knowledge base entry.                |
